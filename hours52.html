<!doctype html>
<html lang="ko" data-theme="light">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ì£¼íœ´ì‹œê°„ ê³„ì‚°ê¸°</title>
<meta name="description" content="ìš”ì¼ë³„ ê·¼ë¡œì‹œê°„ì„ ì…ë ¥í•˜ë©´ ì£¼ ì†Œì •ê·¼ë¡œì‹œê°„(ìµœëŒ€ 40ì‹œê°„)ê³¼ 1ì¼ ì£¼íœ´ì‹œê°„(= ì£¼ ì†Œì •ê·¼ë¡œì‹œê°„/5)ì„ ê³„ì‚°í•©ë‹ˆë‹¤." />
<style>
  :root{
    --bg:#f6f8fb; --surface:#fff; --line:#e5eaf0; --text:#0d1b2a; --muted:#516173;
    --title:#0a0f18; --accent:#2a66ff; --ring:rgba(42,102,255,.22);
    --sec-bg:#0a2a60; --sec-fg:#fff;
    --input-soft:#edf0f4;
  }
  [data-theme="dark"]{
    --bg:#0a0e13; --surface:#0f1520; --line:#1f2a3a; --text:#eef4fb; --muted:#8ea4b8;
    --title:#fff; --accent:#62a8ff; --ring:rgba(98,168,255,.35);
    --sec-bg:#0a2a60; --sec-fg:#fff;
    --input-soft:rgba(255,255,255,.02);
  }
  *{box-sizing:border-box}
  html,body{
    margin:0;padding:0;background:var(--bg);color:var(--text);
    font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Malgun Gothic,Helvetica,Arial,sans-serif;
  }
  .appbar{
    position:sticky;top:0;z-index:10;display:flex;gap:12px;align-items:center;justify-content:space-between;
    padding:10px 16px;background:var(--bg);border-bottom:1px solid var(--line);backdrop-filter:saturate(140%) blur(6px)
  }
  .brand-wrap{
    display:flex;gap:8px;align-items:center;text-decoration:none;color:inherit
  }
  .brand-logo{
    width:32px;height:32px;border-radius:12px;object-fit:cover;display:block
  }
  .brand-text{
    font-weight:800;color:var(--title);line-height:1
  }
  /* ì—°ì°¨ê³„ì‚°ê¸°ë‘ ê°™ì€ ëª¨ì–‘ì˜ ì•„ì´ì½˜ */
  .calc-badge{
    width:26px;height:26px;border-radius:9px;
    background:linear-gradient(165deg,#0a2a60 0%,#2a66ff 100%);
    box-shadow:0 4px 14px rgba(10,42,96,.25);
    display:flex;align-items:center;justify-content:center;
    color:#fff;font-size:12px;font-weight:700;
  }

  select,.btn{
    border:1px solid var(--line);border-radius:12px;padding:8px 12px;
    background:var(--surface);color:var(--text);outline:none;transition:.15s;font-size:13px
  }
  select:hover{border-color:color-mix(in oklab, var(--accent) 30%, var(--line))}
  .btn{border:1px solid var(--accent);background:color-mix(in oklab, var(--accent) 12%, var(--surface));font-weight:700;cursor:pointer}

  .container{max-width:900px;margin:24px auto 80px;padding:0 16px}
  .sheet{background:var(--surface);border:1px solid var(--line);border-radius:18px;overflow:hidden;box-shadow:0 8px 30px rgba(0,0,0,.08)}
  .sheet h1{margin:0;padding:18px;text-align:center;font-size:20px;font-weight:800;color:var(--title);
    border-bottom:1px solid var(--line);background:color-mix(in oklab, var(--surface) 92%, var(--bg))}

  .controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center;padding:12px 16px;border-bottom:1px solid var(--line);background:var(--surface)}
  .tables{padding:16px}

  .table-wrap{border:1px solid var(--line);border-radius:14px;overflow:hidden;background:var(--surface)}
  table{width:100%;border-collapse:separate;border-spacing:0}
  th,td{border-bottom:1px solid var(--line);vertical-align:middle}
  .sec-title{background:var(--sec-bg)!important;color:var(--sec-fg)!important;text-align:left;font-weight:800;padding:10px 12px}

  /* â–¶ ê°€ë¡œí‘œ ìŠ¤íƒ€ì¼ */
  .day-grid th,
  .day-grid td{
    text-align:center;
    padding:6px 4px;
    font-size:13px;
  }
  .day-grid thead th{
    background:color-mix(in oklab, var(--surface) 90%, var(--bg));
    font-weight:700;
  }
  .day-input{
    width:68px;
    height:30px;
    text-align:center;
    padding:4px 6px;
    border-radius:8px;
    border:1px solid rgba(13,27,42,.08);
    background:var(--surface); /* ë„ˆë¬´ ì—°í•´ì„œ ì•ˆ ë³´ì´ë˜ ê±° í•´ê²° */
    color:var(--text);
    font-variant-numeric:tabular-nums;
    outline:none;
  }
  [data-theme="dark"] .day-input{
    background:rgba(15,21,32,.6);
    border:1px solid rgba(255,255,255,.04);
  }
  .day-input:focus{
    border-color:var(--accent);
    box-shadow:0 0 0 3px var(--ring);
  }
  .applied-cell{
    font-variant-numeric:tabular-nums;
    font-weight:600;
  }

  .right{text-align:right}
  .mono{font-variant-numeric:tabular-nums}

  .kpi{display:flex;gap:16px;flex-wrap:wrap;padding:16px 0 4px}
  .chip{flex:1 1 220px;background:var(--surface);border:1px solid var(--line);border-radius:14px;padding:14px}
  .chip strong{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
  .chip .val{font-size:20px;font-weight:800}

  .note{padding:14px 16px 18px;border-top:1px solid var(--line);color:var(--muted);font-size:13px;line-height:1.6}
  .note-warning{color:#d02828;font-weight:600;margin-bottom:6px}
</style>
</head>
<body>

<!-- ìƒë‹¨ ë°” -->
<div class="appbar">
  <!-- LISANG Lab ë¡œê³  ëˆ„ë¥´ë©´ ë©”ì¸ -->
  <a href="./" class="brand-wrap" aria-label="LISANG Lab ë©”ì¸ìœ¼ë¡œ ì´ë™">
    <img src="./lisang-lab-logo.png" alt="LISANG Lab" class="brand-logo" />
    <span class="brand-text">LISANG Lab</span>
    <!-- ì—°ì°¨ê³„ì‚°ê¸°ë‘ ë™ì¼í•œ ìŠ¤íƒ€ì¼ì˜ ì•„ì´ì½˜ -->
    <span class="calc-badge" title="ì£¼íœ´ì‹œê°„ ê³„ì‚°ê¸°">ì£¼</span>
  </a>
  <div style="display:flex;gap:10px;align-items:center;">
    <label for="navSelect" class="subtle" style="font-size:12px;color:var(--muted);">ê³„ì‚°ê¸°</label>
    <select id="navSelect">
      <option value="./">ë©”ì¸</option>
      <option value="./severance.html">í‡´ì§ê¸ˆ ê³„ì‚°ê¸°</option>
      <option value="./annual.html">ì—°ì°¨íœ´ê°€ ê³„ì‚°ê¸°</option>
      <option value="./hours52.html" selected>ì£¼íœ´ì‹œê°„ ê³„ì‚°ê¸°</option>
    </select>
    <button id="themeBtn" class="btn" type="button">ğŸŒ™ ë‹¤í¬ ëª¨ë“œ</button>
  </div>
</div>

<div class="container">
  <div class="sheet">
    <h1>ì£¼íœ´ì‹œê°„ ê³„ì‚°ê¸°</h1>

    <div class="controls">
      <button id="resetBtn" class="btn" type="button">ì´ˆê¸°í™”</button>
      <span style="font-size:12px;color:var(--muted)">ìš”ì¼ë³„ ê·¼ë¡œì‹œê°„ì„ ì…ë ¥í•˜ì„¸ìš”. (í•˜ë£¨ ìµœëŒ€ 8ì‹œê°„, ì£¼ ìµœëŒ€ 40ì‹œê°„ ë°˜ì˜)</span>
    </div>

    <div class="tables">
      <div class="table-wrap">
        <table class="day-grid">
          <thead>
            <tr><th class="sec-title" colspan="8">ìš”ì¼ë³„ ê·¼ë¡œì‹œê°„ ì…ë ¥</th></tr>
            <tr id="row-names"></tr>
          </thead>
          <tbody>
            <tr id="row-inputs"></tr>
            <tr id="row-applied"></tr>
            <tr>
              <th style="text-align:right" colspan="7">í•©ê³„</th>
              <td style="text-align:center;">
                <div style="font-size:12px;color:var(--muted);">ì…ë ¥ / ë°˜ì˜</div>
                <div class="mono" id="sumInput">0.0</div>
                <div class="mono" id="sumCapped">0.0</div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- KPIs -->
      <div class="kpi">
        <div class="chip">
          <strong>1ì£¼ ì†Œì •ê·¼ë¡œì‹œê°„ (ìµœëŒ€ 40ì‹œê°„)</strong>
          <div class="val mono" id="weeklyStd">0.0</div>
        </div>
        <div class="chip">
          <strong>1ì¼ ì£¼íœ´ì‹œê°„ (ì£¼ ì†Œì •ê·¼ë¡œì‹œê°„ Ã· 5)</strong>
          <div class="val mono" id="weeklyHolidayPerDay">0.0</div>
        </div>
      </div>
    </div>

    <div class="note">
      <div id="holidayMsg"></div>
      * 1ì¼ 8ì‹œê°„ ì´ˆê³¼ ì…ë ¥ ì‹œ 8ì‹œê°„ìœ¼ë¡œ ìë™ ë°˜ì˜ë©ë‹ˆë‹¤.<br>
      * 1ì£¼ í•©ê³„ê°€ 40ì‹œê°„ì„ ì´ˆê³¼í•˜ëŠ” ê²½ìš°, ì£¼ ì†Œì •ê·¼ë¡œì‹œê°„ì€ 40ì‹œê°„ìœ¼ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤.<br>
      * ë³¸ ê³„ì‚°ê¸°ëŠ” í¸ì˜ë¥¼ ìœ„í•œ ë„êµ¬ë¡œ, ì‹¤ì œ ì ìš©ì€ ì·¨ì—…ê·œì¹™Â·ë‹¨ì²´í˜‘ì•½ ë° ê´€ê³„ ë²•ë ¹ì„ í™•ì¸í•˜ì„¸ìš”.
    </div>
  </div>
</div>

<script>
/* ===== ë„¤ë¹„ê²Œì´ì…˜ & í…Œë§ˆ ===== */
document.getElementById('navSelect').addEventListener('change', e=>{
  if(e.target.value) location.href = e.target.value;
});
(function(){
  const saved = localStorage.getItem('theme');
  if(saved) document.documentElement.setAttribute('data-theme', saved);
  updateThemeBtn();
})();
function updateThemeBtn(){
  const dark=document.documentElement.getAttribute('data-theme')==='dark';
  document.getElementById('themeBtn').textContent=dark?'â˜€ï¸ ë¼ì´íŠ¸ ëª¨ë“œ':'ğŸŒ™ ë‹¤í¬ ëª¨ë“œ';
}
document.getElementById('themeBtn').addEventListener('click',()=>{
  const cur=document.documentElement.getAttribute('data-theme')||'light';
  const next=cur==='light'?'dark':'light';
  document.documentElement.setAttribute('data-theme',next);
  localStorage.setItem('theme',next);
  updateThemeBtn();
});

/* ===== Core ===== */
const DAY_LABELS = ['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ']; // ê°€ë¡œí‘œë‹ˆê¹Œ ì§§ê²Œ
const MAX_PER_DAY = 8;
const MAX_PER_WEEK = 40;
const HOLIDAY_MIN = 15; // 1ì£¼ 15ì‹œê°„ ë¯¸ë§Œì´ë©´ ì£¼íœ´ ë¯¸ë°œìƒ

function clampDay(v){
  const n = isNaN(parseFloat(v)) ? 0 : parseFloat(v);
  return Math.min(Math.max(n,0), MAX_PER_DAY);
}

function renderGrid(){
  const rowNames = document.getElementById('row-names');
  const rowInputs = document.getElementById('row-inputs');
  const rowApplied = document.getElementById('row-applied');

  rowNames.innerHTML = '';
  rowInputs.innerHTML = '';
  rowApplied.innerHTML = '';

  DAY_LABELS.forEach((name, idx)=>{
    // ìš”ì¼ í—¤ë”
    const th = document.createElement('th');
    th.textContent = name;
    rowNames.appendChild(th);

    // ì…ë ¥ì¹¸
    const tdInput = document.createElement('td');
    const input = document.createElement('input');
    input.type = 'number';
    input.min = '0';
    input.step = '0.1';
    input.placeholder = '0';
    input.value = '';               // ê¸°ë³¸ 0 ì—†ì•°
    input.className = 'day-input';
    input.dataset.index = idx;
    tdInput.appendChild(input);
    rowInputs.appendChild(tdInput);

    // ë°˜ì˜ì¹¸
    const tdApplied = document.createElement('td');
    tdApplied.className = 'applied-cell';
    tdApplied.id = `applied-${idx}`;
    tdApplied.textContent = '0.0';
    rowApplied.appendChild(tdApplied);

    input.addEventListener('input', handleChange);
    input.addEventListener('blur', handleChange);
  });

  // ë§ˆì§€ë§‰ ì—´: í•©ê³„ìš© í—¤ë”/ì…€
  const thSum = document.createElement('th');
  thSum.textContent = 'í•©ê³„';
  rowNames.appendChild(thSum);

  const tdSumInput = document.createElement('td');
  rowInputs.appendChild(tdSumInput);

  const tdSumApplied = document.createElement('td');
  rowApplied.appendChild(tdSumApplied);
}

function handleChange(e){
  const v = clampDay(e.target.value);
  if(e.target.value !== ''){
    if (e.target.value !== String(v)) e.target.value = v;
  }
  const idx = e.target.dataset.index;
  document.getElementById(`applied-${idx}`).textContent = v.toFixed(1);

  recalc();
}

function recalc(){
  const inputs = [...document.querySelectorAll('.day-input')];
  const applied = inputs.map(inp => clampDay(inp.value === '' ? 0 : inp.value));

  const sumInput = inputs.reduce((a,inp)=>a + (inp.value === '' ? 0 : (parseFloat(inp.value)||0)), 0);
  const sumApplied = applied.reduce((a,b)=>a+b, 0);

  // ì£¼ ì†Œì •ê·¼ë¡œì‹œê°„: ìµœëŒ€ 40
  const weeklyStd = Math.min(sumApplied, MAX_PER_WEEK);

  // 15ì‹œê°„ ë¯¸ë§Œì´ë©´ ì£¼íœ´ ë¯¸ë°œìƒ
  let weeklyHolidayPerDay = 0;
  const msgBox = document.getElementById('holidayMsg');
  if(weeklyStd < HOLIDAY_MIN){
    weeklyHolidayPerDay = 0;
    msgBox.innerHTML = '<div class="note-warning">ì†Œì •ê·¼ë¡œì‹œê°„ 1ì£¼ 15ì‹œê°„ ë¯¸ë§Œìœ¼ë¡œ ì£¼íœ´ ë¯¸ë°œìƒ</div>';
  } else {
    weeklyHolidayPerDay = weeklyStd / 5;
    msgBox.innerHTML = '';
  }

  document.getElementById('sumInput').textContent = sumInput.toFixed(1);
  document.getElementById('sumCapped').textContent = sumApplied.toFixed(1);
  document.getElementById('weeklyStd').textContent = weeklyStd.toFixed(1);
  document.getElementById('weeklyHolidayPerDay').textContent = weeklyHolidayPerDay.toFixed(1);
}

document.getElementById('resetBtn').addEventListener('click', ()=>{
  document.querySelectorAll('.day-input').forEach(i=> {
    i.value='';
  });
  DAY_LABELS.forEach((_,i)=> document.getElementById(`applied-${i}`).textContent='0.0');
  recalc();
});

// ì´ˆê¸° ë Œë”
renderGrid();
recalc();
</script>
</body>
</html>
